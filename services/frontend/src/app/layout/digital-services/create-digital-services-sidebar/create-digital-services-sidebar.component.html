<div pFocusTrap class="create-ds-sidebar">
    <app-form-nav
        [spaceDetails]="importDetails"
        [spaceForm]="createForm"
        [onlyOneNav]="true"
    ></app-form-nav>
    @if (importDetails && importDetails["form"]) {
        <div class="space-form">
            <p-scrollPanel [style]="{ width: '100%', height: 'calc(100vh - 100px)' }">
                <form [formGroup]="createForm">
                    <h2>{{ "digital-services.version.add-ds" | translate }}</h2>
                    <p-button
                        (onClick)="closeSidebar()"
                        [link]="true"
                        [rounded]="true"
                        ariaLabel="Outlined Close Button"
                        icon="pi pi-times"
                        class="space-sidebar-close"
                        styleClass="space-sidebar-close-button text-black-alpha-60"
                    ></p-button>
                    <h3 class="blue-color ml-0 font-semibold">
                        {{ "digital-services.version.ds-name" | translate }}
                    </h3>
                    <p>{{ "digital-services.version.ds-text" | translate }}</p>
                    <hr />
                    <div class="my-5 pb-4">
                        <div class="flex w-7">
                            <h4 class="mr-auto inline m-0 font-semibold">
                                {{ "digital-services.version.ds-name" | translate }}
                            </h4>
                            <span>{{
                                "digital-services.version.required-field" | translate
                            }}</span>
                        </div>
                        <input
                            pInputText
                            id="dsName-input"
                            aria-describedby="dsName-input"
                            [placeholder]="
                                'digital-services.version.ds-name-placeholder' | translate
                            "
                            formControlName="dsName"
                            class="mt-2 w-7"
                            autofocus="true"
                        />
                        <span
                            class="error-text block"
                            *ngIf="createForm.get('dsName')?.hasError('required')"
                        >
                            {{ "digital-services.version.ds-name" | translate }}
                            {{ "common.mandatory" | translate }}
                        </span>
                        <span
                            class="error-text block"
                            *ngIf="createForm.get('dsName')?.hasError('uniqueName')"
                        >
                            {{
                                "digital-services.error.digital-service-already-exists"
                                    | translate
                            }}
                        </span>
                    </div>

                    <h3 class="blue-color ml-0 font-semibold">
                        {{ "digital-services.version.active-version-name" | translate }}
                    </h3>
                    <p
                        [innerHtml]="
                            'digital-services.version.ds-version-text' | translate
                        "
                    ></p>
                    <hr />
                    <div class="my-5">
                        <div class="flex w-7">
                            <h4 class="mr-auto inline m-0 font-semibold">
                                {{ "digital-services.version.version-name" | translate }}
                            </h4>
                            <span>{{
                                "digital-services.version.required-field" | translate
                            }}</span>
                        </div>
                        <input
                            pInputText
                            id="dsVersionName-input"
                            aria-describedby="dsVersionName-input"
                            [placeholder]="
                                'digital-services.version.ds-version-name-placeholder'
                                    | translate
                            "
                            formControlName="dsVersionName"
                            class="mt-2 w-7"
                            autofocus="true"
                        />
                        <span
                            class="error-text block"
                            *ngIf="createForm.get('dsVersionName')?.hasError('required')"
                        >
                            {{ "digital-services.version.version-name" | translate }}
                            {{ "common.mandatory" | translate }}
                        </span>
                    </div>
                </form>
            </p-scrollPanel>
            <!-- Footer Buttons -->
            <div class="mt-3">
                <div
                    class="space-form--button-group flex align-content-end justify-content-end flex-wrap"
                >
                    <p-button
                        class="cancel-creation mr-auto"
                        styleClass="cancel-creation-button uppercase"
                        (onClick)="closeSidebar()"
                        [label]="'common.workspace.cancel' | translate"
                        [ariaLabel]="'common.workspace.cancel' | translate"
                    ></p-button>

                    <p-button
                        (onClick)="createDS()"
                        styleClass="uppercase bg-light-green"
                        [disabled]="createForm.invalid"
                        [label]="'digital-services.version.validate-creation' | translate"
                        [ariaLabel]="
                            'digital-services.version.validate-creation' | translate
                        "
                    ></p-button>
                </div>
            </div>
        </div>
    }
</div>
